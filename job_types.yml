RtcGamma:
  image: 845172464411.dkr.ecr.us-west-2.amazonaws.com/hyp3-gamma
  api_job_type: RTC_GAMMA
  parameters:
    granules:
      default: '""'
      api_schema_location: "#/components/schemas/rtc_granules"
    bucket_prefix:
      default:  '""'
    resolution:
      default:  30.0
      api_schema_location: "#/components/schemas/resolution"
    dem_name:
      default: copernicus
      api_schema_location: "#/components/schemas/dem_name"
    radiometry:
      default:  gamma0
      api_schema_location: "#/components/schemas/radiometry"
    scale:
      default:  power
      api_schema_location: "#/components/schemas/scale"
    speckle_filter:
      default: false
      api_schema_location: "#/components/schemas/speckle_filter"
    dem_matching:
      default:  false
      api_schema_location: "#/components/schemas/dem_matching"
    include_dem:
      default:  false
      api_schema_location: "#/components/schemas/include_dem"
    include_inc_map:
      default:  false
      api_schema_location: "#/components/schemas/include_inc_map"
    include_scattering_area:
      default: false
      api_schema_location: "#/components/schemas/include_scattering_area"
    include_rgb:
      default: false
      api_schema_location: "#/components/schemas/include_rgb"
  command:
    - ++process
    - rtc
    - --username
    - '!Ref EDLUsername'
    - --password
    - '!Ref EDLPassword'
    - --bucket
    - '!Ref Bucket'
    - --bucket-prefix
    - Ref::bucket_prefix
    - --resolution
    - Ref::resolution
    - --dem-name
    - Ref::dem_name
    - --radiometry
    - Ref::radiometry
    - --scale
    - Ref::scale
    - --speckle-filter
    - Ref::speckle_filter
    - --dem-matching
    - Ref::dem_matching
    - --include-dem
    - Ref::include_dem
    - --include-inc-map
    - Ref::include_inc_map
    - --include-scattering-area
    - Ref::include_scattering_area
    - --include-rgb
    - Ref::include_rgb
    - Ref::granules
  validators:
    - check_dem_coverage
  timeout: 10800

InsarGamma:
  image: 845172464411.dkr.ecr.us-west-2.amazonaws.com/hyp3-gamma
  api_job_type: INSAR_GAMMA
  parameters:
    granules:
      default:  '""'
      api_schema_location: "#/components/schemas/insar_granules"
    bucket_prefix:
      default:  '""'
    include_look_vectors:
      default:  false
      api_schema_location: "#/components/schemas/include_look_vectors"
    include_los_displacement:
      default:  false
      api_schema_location: "#/components/schemas/los_displacement"
    include_displacement_maps:
      default:  false
      api_schema_location: "#/components/schemas/include_displacement_maps"
    include_inc_map:
      default: false
      api_schema_location: "#/components/schemas/include_inc_map"
    include_dem:
      default: false
      api_schema_location: "#/components/schemas/include_dem"
    include_wrapped_phase:
      default: false
      api_schema_location: "#/components/schemas/include_wrapped_phase"
    apply_water_mask:
      default: false
      api_schema_location: "#/components/schemas/apply_water_mask"
    looks:
      default:  20x4
      api_schema_location: "#/components/schemas/looks"
  command:
    - ++process
    - insar
    - --username
    - '!Ref EDLUsername'
    - --password
    - '!Ref EDLPassword'
    - --bucket
    - '!Ref Bucket'
    - --bucket-prefix
    - Ref::bucket_prefix
    - --include-look-vectors
    - Ref::include_look_vectors
    - --include-los-displacement
    - Ref::include_los_displacement
    - --include-displacement-maps
    - Ref::include_displacement_maps
    - --include-inc-map
    - Ref::include_inc_map
    - --include-dem
    - Ref::include_dem
    - --include-wrapped-phase
    - Ref::include_wrapped_phase
    - --apply-water-mask
    - Ref::apply_water_mask
    - --looks
    - Ref::looks
    - Ref::granules
  validators:
    - check_dem_coverage
  timeout: 10800

Autorift:
  image: ${AutoriftImage}
  api_job_type: AUTORIFT
  parameters:
    granules:
      default:  '""'
      api_schema_location: "#/components/schemas/autorift_granules"
    bucket_prefix:
      default:  '""'
  command:
    - --username
    - '!Ref EDLUsername'
    - --password
    - '!Ref EDLPassword'
    - --bucket
    - '!Ref Bucket'
    - --bucket-prefix
    - Ref::bucket_prefix
    - --parameter-file
    - '!Ref AutoriftParameterFile'
    - --naming-scheme
    - '!Ref AutoriftNamingScheme'
    - Ref::granules
  validators: []
  timeout: 10800

WaterMap:
  image: 845172464411.dkr.ecr.us-west-2.amazonaws.com/hyp3-gamma
  api_job_type: WATER_MAP
  parameters:
    granules:
      default: '""'
      api_schema_location: "#/components/schemas/rtc_granules"
    bucket_prefix:
      default:  '""'
    resolution:
      default:  30.0
      api_schema_location: "#/components/schemas/resolution"
    speckle_filter:
      default: false
      api_schema_location: "#/components/schemas/speckle_filter"
    max_vv_threshold:
      default: -15.5
      api_schema_location: "#/components/schemas/max_vv_threshold"
    max_vh_threshold:
      default: -23.0
      api_schema_location: "#/components/schemas/max_vh_threshold"
    hand_threshold:
      default: 15.0
      api_schema_location: "#/components/schemas/hand_threshold"
    hand_fraction:
      default: 0.8
      api_schema_location: "#/components/schemas/hand_fraction"
    membership_threshold:
      default: 0.45
      api_schema_location: "#/components/schemas/membership_threshold"
  required_parameters:
    - granules
  command:
    - ++process
    - water_map
    - --username
    - '!Ref EDLUsername'
    - --password
    - '!Ref EDLPassword'
    - --bucket
    - '!Ref Bucket'
    - --bucket-prefix
    - Ref::bucket_prefix
    - --resolution
    - Ref::resolution
    - --speckle-filter
    - Ref::speckle_filter
    - --max-vv-threshold
    - Ref::max_vv_threshold
    - --max-vh-threshold
    - Ref::max_vh_threshold
    - --hand-threshold
    - Ref::hand_threshold
    - --hand-fraction
    - Ref::hand_fraction
    - --membership-threshold
    - Ref::membership_threshold
    - Ref::granules
  validators:
    - check_dem_coverage
  timeout: 86400
