components:
  schemas:
    job_parameters:
      oneOf:
        - $ref: "#/components/schemas/rtc_gamma_job_parameters"
        - $ref: "#/components/schemas/insar_gamma_job_parameters"

    insar_gamma_job_parameters:
      description: Options and parameters for running the job process.
      type: object
      required:
        - granules
      additionalProperties: false
      properties:
        granules:
          $ref: "#/components/schemas/insar_gamma_granules"
        include_inc_map:
          $ref: "#/components/schemas/include_inc_map"
        looks:
          $ref: "#/components/schemas/looks"
        include_los_displacement:
          $ref: "#/components/schemas/los_displacement"

    rtc_gamma_job_parameters:
      description: Options and parameters for running the job process.
      type: object
      required:
        - granules
      additionalProperties: false
      properties:
        granules:
          $ref: "#/components/schemas/rtc_gamma_granules"
        resolution:
          $ref: "#/components/schemas/resolution"
        radiometry:
          $ref: "#/components/schemas/radiometry"
        speckle_filter:
          $ref: "#/components/schemas/speckle_filter"
        scale:
          $ref: "#/components/schemas/scale"
        dem_matching:
          $ref: "#/components/schemas/dem_matching"
        include_dem:
          $ref: "#/components/schemas/include_dem"
        include_inc_map:
          $ref: "#/components/schemas/include_inc_map"

    insar_gamma_granules:
      type: array
      minItems: 2
      maxItems: 2
      items:
        $ref: "#/components/schemas/granule_slc"

    rtc_gamma_granules:
      type: array
      minItems: 1
      maxItems: 1
      items:
        anyOf:
          - $ref: "#/components/schemas/granule_grdh"
          - $ref: "#/components/schemas/granule_slc"


    granule_grdh:
      description: The name of the Sentinel-1 GRDH granule to process.
      type: string
      pattern: "^S1[AB]_IW_GRDH_*"
      minLength: 67
      maxLength: 67
      example: S1A_IW_SLC__1SSV_20150621T120220_20150621T120232_006471_008934_72D8

    granule_slc:
      description: The name of the Sentinel-1 SLC granule to process.
      type: string
      pattern: "^S1[AB]_IW_SLC__*"
      minLength: 67
      maxLength: 67
      example: S1A_IW_SLC__1SSV_20150621T120220_20150621T120232_006471_008934_72D8

    resolution:
      description: Desired output resolution in meters.
      type: number
      enum:
        - 30.0

    radiometry:
      description: Backscatter coefficient normalization, either by ground area (sigma0) or illuminated area projected into the look direction (gamma0)
      type: string
      enum:
        - gamma0
        - sigma0

    scale:
      description: Output image scale
      type: string
      enum:
        - power
        - amplitude

    speckle_filter:
      description: Apply an enhanced lee speckle filter
      default: false
      type: boolean

    dem_matching:
      description: Attempt to match the DEMs otherwise use dead-reckoning
      default: false
      type: boolean

    include_dem:
      description: Include the DEM files in the product package
      default: false
      type: boolean

    include_inc_map:
      description: Include the incident angle map in the product package
      default: false
      type: boolean

    looks:
      description: Number of looks to take in range and azimuth
      type: string
      enum:
        - 20x4
        - 10x2

    los_displacement:
      description: Include a GeoTIFF in the product package containing the displacements along the Line-Of-Sight (LOS)
      default: false
      type: boolean