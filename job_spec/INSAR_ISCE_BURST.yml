INSAR_ISCE_BURST:
  required_parameters:
    - granules
  parameters:
    granules:
      default:  '""'
      api_schema:
        type: array
        minItems: 2
        maxItems: 2
        example:
          - S1_249434_IW1_20230523T170733_VV_8850-BURST
          - S1_249434_IW1_20230511T170732_VV_07DE-BURST
        items:
          description: The reference and secondary bursts.
          type: string
          pattern: "^S1_.*-BURST"
          minLength: 43
          maxLength: 43
          example: S1_249434_IW1_20230523T170733_VV_8850-BURST
    bucket_prefix:
      default:  '""'
    azimuth_looks:
      description: Number of looks to take in azimuth
      type: integer
      default: 4
      # TODO enum?
    range_looks:
      description: Number of looks to take in range
      type: integer
      default: 20
      # TODO enum?
  validators: []
  tasks:
    - name: ''
      image: ghcr.io/asfhyp3/hyp3-isce2
      command:
        - ++process
        - insar_tops_burst
        - ++omp-num-threads
        - '1'
        - --bucket
        - '!Ref Bucket'
        - --bucket-prefix
        - Ref::bucket_prefix
        - --azimuth-looks
        - Ref::azimuth_looks
        - --range-looks
        - Ref::range_looks
        - Ref::granules
      timeout: 3600  # TODO decide on appropriate value
      vcpu: 1
      memory: 7600
      secrets:
        - EARTHDATA_USERNAME
        - EARTHDATA_PASSWORD
