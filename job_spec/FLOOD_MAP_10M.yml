WATER_MAP:
  image: 845172464411.dkr.ecr.us-west-2.amazonaws.com/hyp3-gamma
  required_parameters:
    - granules
  parameters:
    granules:
      default: '""'
      api_schema:
        type: array
        minItems: 1
        maxItems: 1
        items:
          anyOf:
            - description: The name of the surface water extent map to process.
              type: string
              pattern: "^S1[AB]_IW_GRDH_1SDV"
              minLength: 67
              maxLength: 67
              example: S1A_IW_GRDH_1SDV_20210413T235641_20210413T235706_037439_0469D0_3F2B_WM.tif
            - description: The name of the HAND product to process.
              type: string
              pattern: "^S1[AB]_IW_SLC__1SDV"
              minLength: 67
              maxLength: 67
              example: S1A_IW_SLC__1SDV_20211110T234815_20211110T234842_040516_04CE0A_E717_WM_HAND.tif
    bucket_prefix:
      default:  '""'
    estimator:
      api_schema:
        description: Flood depth estimation approach
        default: 'nmad'
        type: string
    water_level_sigma:
      api_schema:
        description: Standard deviation to estimate max water height for each object.
        default: 3.0
        type: number
    known_water_threshold:
     api_schema:
        description: Threshold for extracting known water area in percent.
        default: 30.0
        type: number
        enum:
          - 30.0
  iterative_bounds:
    api_schema:
        description: Bounds used for iterative method.
        default: (0, 15)
        type: tuple
  command:
    - ++process
    - flood_map
    - --bucket
    - '!Ref Bucket'
    - --bucket-prefix
    - Ref::bucket_prefix
    - --estimator
    - Ref::estimator
    - --water_level_sigma
    - Ref::water_level_sigma
    - --known_water_threshold
    - Ref::known_water_threshold
    - --iterative_bounds
    - Ref::iterative_bounds
    - Ref::granules
  validators: []
  timeout: 5400
  vcpu: 1
  memory: 31600